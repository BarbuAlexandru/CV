CREATE TABLE TollBooths  
(  
	Id UNIQUEIDENTIFIER PRIMARY KEY,
	City NVARCHAR(20) NOT NULL
);  

CREATE TABLE TollBooths  
(  
	Id UNIQUEIDENTIFIER PRIMARY KEY,

	TollLocationId UNIQUEIDENTIFIER NOT NULL,

	CONSTRAINT FK_TollLocation_TollBooth FOREIGN KEY (TollLocationId)
		REFERENCES TollLocation (Id)
		ON DELETE CASCADE
);


CREATE TABLE Employee  
(  
	Id UNIQUEIDENTIFIER PRIMARY KEY,
	City NVARCHAR(30) NOT NULL,
	Salary int NOT NULL,

	TollBoothId UNIQUEIDENTIFIER,

	CONSTRAINT FK_TollBooth_Employee FOREIGN KEY (TollBoothId)
		REFERENCES TollBooth (Id)
		ON DELETE NO ACTION
);


CREATE TABLE TollPayment  
(  
	Id UNIQUEIDENTIFIER PRIMARY KEY,
	Amount int NOT NULL,
	[Date] DATE NOT NULL,

	EmployeeId nvarchar(450) NOT NULL,

	CONSTRAINT FK_Employee_TollPayment FOREIGN KEY (EmployeeId)
		REFERENCES AspNetUsers (Id)
		ON DELETE CASCADE
);


CREATE TABLE TollPrice  
(  
	Id UNIQUEIDENTIFIER PRIMARY KEY,
	Vehicle NVARCHAR(20) NOT NULL,
	Price int NOT NULL,

	TollLocationId UNIQUEIDENTIFIER NOT NULL,

	CONSTRAINT FK_TollLocation_TollPrice FOREIGN KEY (TollLocationId)
		REFERENCES TollLocation (Id)
		ON DELETE CASCADE
);


CREATE TABLE TravelPrice  
(  
	Id UNIQUEIDENTIFIER PRIMARY KEY,
	StartCityId UNIQUEIDENTIFIER NOT NULL,
	EndCityId UNIQUEIDENTIFIER NOT NULL,
	Price int NOT NULL,
	Vehicle NVARCHAR(20) NOT NULL,

	
	CONSTRAINT FK_TollLocation_TravelPrice_Start FOREIGN KEY (StartCityId)
		REFERENCES TollLocation (Id)
		ON DELETE NO ACTION,

		
	CONSTRAINT FK_TollLocation_TravelPrice_End FOREIGN KEY (EndCityId)
		REFERENCES TollLocation (Id)
		ON DELETE NO ACTION

);


CREATE TABLE Trip  
(  
	Id UNIQUEIDENTIFIER PRIMARY KEY,
	StartCityId UNIQUEIDENTIFIER NOT NULL,
	EndCityId UNIQUEIDENTIFIER,
	Vehicle NVARCHAR(20) NOT NULL,

	EmployeeId nvarchar(450) NOT NULL,
	
	CONSTRAINT FK_TollLocation_Trip_Start FOREIGN KEY (StartCityId)
		REFERENCES TollLocation (Id)
		ON DELETE NO ACTION,

		
	CONSTRAINT FK_TollLocation_Trip_End FOREIGN KEY (EndCityId)
		REFERENCES TollLocation (Id)
		ON DELETE NO ACTION,

	CONSTRAINT FK_Employee_Trip FOREIGN KEY (EmployeeId)
		REFERENCES AspNetUsers (Id)
		ON DELETE CASCADE
);


CREATE TABLE TripPayment  
(  
	Id UNIQUEIDENTIFIER PRIMARY KEY,
	Amount int NOT NULL,
	[Date] DATE NOT NULL,

	TripId UNIQUEIDENTIFIER NOT NULL,

	CONSTRAINT FK_Trip_TripPayment FOREIGN KEY (TripId)
		REFERENCES Trip (Id)
		ON DELETE CASCADE
);

